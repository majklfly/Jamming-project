(this.webpackJsonpjamming=this.webpackJsonpjamming||[]).push([[0],{100:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(52),o=a.n(c),s=(a(66),a(6)),i=a(11),u=a(28),l=a(30),m=a(3),p=a.n(m),d=a(8),f=a(2),y=function(e,t,a){var c=r.a.createContext();return{Context:c,Provider:function(o){var i=o.children,u=Object(n.useReducer)(e,a),l=Object(s.a)(u,2),m=l[0],p=l[1],d={};for(var y in t)d[y]=t[y](p);return r.a.createElement(c.Provider,{value:Object(f.a)({state:m},d)},i)}}},k=a(9),v=a.n(k),b=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={Authorization:"Bearer ".concat(t)},"string"!==typeof t){e.next=6;break}return e.next=4,v.a.get("https://api.spotify.com/v1/me",{headers:a});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(p.a.mark((function e(t,a,n,r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("https://api.spotify.com/v1/users/".concat(t,"/playlists/").concat(a,"/tracks"),JSON.stringify({uris:n}),{headers:{Authorization:"Bearer ".concat(r)}});case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),g=function(e){return function(t){v.a.get("https://api.spotify.com/v1/me/player",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return t.data?e({type:"get_playerdata",payload:t.data}):e({type:"error_message",payload:"Turn on your spotify, mate"})}))}},E=y((function(e,t){switch(t.type){case"get_userdata":return Object(f.a)(Object(f.a)({},e),{},{userdata:t.payload});case"get_token":return Object(f.a)(Object(f.a)({},e),{},{token:t.payload});case"get_tracks":return Object(f.a)(Object(f.a)({},e),{},{tracks:t.payload});case"error_message":return Object(f.a)(Object(f.a)({},e),{},{error:t.payload});case"get_playerdata":return Object(f.a)(Object(f.a)({},e),{},{playerdata:t.payload});case"get_albums":return Object(f.a)(Object(f.a)({},e),{},{albums:t.payload});default:return e}}),{fetchUserData:b,getToken:function(e){return Object(d.a)(p.a.mark((function t(){var a,n,r,c,o,s,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=window.location.href.match(/access_token=([^&]*)/),n=window.location.href.match(/expires_in=([^&]*)/),!a||!n){t.next=14;break}return r=a[1],c=Number(n[1]),window.setTimeout((function(){return r=""}),1e3*c),window.history.pushState("Access Token",null,"/"),t.next=9,b(r);case 9:o=t.sent,e({type:"get_token",payload:r}),e({type:"get_userdata",payload:o}),t.next=17;break;case 14:s=encodeURIComponent("user-read-private user-library-read user-modify-playback-state user-read-playback-state user-read-currently-playing"),i="https://accounts.spotify.com/authorize?client_id=".concat("91676161ae734812a2d87002a4246b27","&response_type=token&scope=").concat(s,"&redirect_uri=").concat("http://localhost:3000/"),window.location=i;case 17:case"end":return t.stop()}}),t)})))},spotifySearch:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==a.length){t.next=4;break}e({type:"error_message",payload:"Drop your favorite song, mate"}),t.next=9;break;case 4:return t.next=6,v.a.get("https://api.spotify.com/v1/search?type=track&q=".concat(a),{headers:{Authorization:"Bearer ".concat(n)}});case 6:200===(r=t.sent).status&&0===r.data.tracks.items.length&&e({type:"error_message",payload:"Not in the database, mate"}),200===r.status?e({type:"get_tracks",payload:r.data.tracks.items}):console.log(r.status);case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},spotifySavePlaylist:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a,n,r,c){var o,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.length?a||e({type:"error_message",payload:"Missing name of the playlist, mate"}):e({type:"error_message",payload:"Add songs to the playlist, mate"}),t.next=3,v.a.post("https://api.spotify.com/v1/users/".concat(r,"/playlists"),JSON.stringify({name:a}),{headers:{Authorization:"Bearer ".concat(c)}});case 3:return o=t.sent,s=o.data.id,t.next=7,h(r,s,n,c);case 7:201===t.sent.status&&e({type:"error_message",payload:null});case 9:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}()},cleanErrorMessage:function(e){return function(){e({type:"error_message",payload:null})}},getCurrentPlayback:g,getAlbums:function(e){return function(){var t=Object(d.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://api.spotify.com/v1/me/albums",{headers:{Authorization:"Bearer ".concat(a)}});case 2:n=t.sent,e({type:"get_albums",payload:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},playSpecificSong:function(e){return function(){var e=Object(d.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("https://api.spotify.com/v1/me/player/play",JSON.stringify({uris:[a]}),{headers:{Authorization:"Bearer ".concat(t)}});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}},{loading:!1,error:!1}),O=E.Context,j=E.Provider,x=y((function(e,t){switch(console.log(t.payload),t.type){case"get_currentPlayback":return Object(f.a)(Object(f.a)({},e),{},{data:t.payload});default:return e}}),{playSong:function(e){return function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{v.a.put("https://api.spotify.com/v1/me/player/play",{},{headers:{Authorization:"Bearer ".concat(t)}})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pauseSong:function(e){return function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{v.a.put("https://api.spotify.com/v1/me/player/pause",{},{headers:{Authorization:"Bearer ".concat(t)}})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},nextSong:function(e){return function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v.a.post("https://api.spotify.com/v1/me/player/next",{},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return 204===e.status&&g(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},previousSong:function(e){return function(){var e=Object(d.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{v.a.post("https://api.spotify.com/v1/me/player/previous",{},{headers:{Authorization:"Bearer ".concat(t)}})}catch(a){console.log(a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},{}),w=x.Context,N=x.Provider,C=(a(88),a(89),function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useContext)(O),i=o.state,u=o.spotifySearch,l=function(){u(a,i.token)};return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("input",{placeholder:"Enter A Song, Album, or Artist",onChange:function(e){c(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&l()}}),r.a.createElement("div",{className:"SearchButton",onClick:function(){return l()}},"SEARCH"))}),T=(a(90),a(91),a(92),a(150)),S=a(151),_=a(152),P=a(60),A=y((function(e,t){switch(console.log("triggered",t),t.type){case"add_track":return Object(f.a)(Object(f.a)({},e),{},{tracks:[].concat(Object(P.a)(e.tracks),[t.track])});case"remove_track":return Object(f.a)(Object(f.a)({},e),{},{tracks:e.tracks.filter((function(e){return e.id!==t.track.id}))});case"set_playlist":return Object(f.a)(Object(f.a)({},e),{},{playlist:t.list});case"reset_animation":return Object(f.a)(Object(f.a)({},e),{},{resetAnimation:t.value});default:return e}}),{addTrack:function(e){return function(t){e({type:"add_track",track:t})}},setPlaylist:function(e){return function(t){e({type:"set_playlist",list:t})}},removeTrack:function(e){return function(t){e({type:"remove_track",track:t})}},resetAnimation:function(e){return function(t){e({type:"reset_animation",value:t})}}},{tracks:[]}),B=A.Context,z=A.Provider,I=function(e){var t=Object(n.useContext)(B),a=t.addTrack,c=t.removeTrack,o=t.resetAnimation,s=Object(n.useContext)(O),i=s.state,u=s.playSpecificSong,l=s.getCurrentPlayback;return r.a.createElement("div",{className:"Track",key:e.track.id},r.a.createElement("div",{className:"Track-cover-preview"},r.a.createElement("img",{className:"Track-album-cover",src:e.track.album.images[2].url,alt:"album cover"})),r.a.createElement("div",{className:"Track-information-container"},e.track.name.length<30?r.a.createElement("h3",{className:"Track-information"},e.track.name):r.a.createElement("p",{className:"Track-information"},e.track.name),r.a.createElement("p",{className:"Track-artist"},e.track.artists[0].name," | ",e.track.album.name)),e.isRemoval?r.a.createElement(T.a,{onClick:function(){return c(e.track)},className:"Track-icon"}):r.a.createElement("div",{className:"Track-icons-container"},r.a.createElement(S.a,{className:"Track-icon",onClick:function(){return t=e.track.uri,u(i.token,t),o(!0),void setTimeout((function(){l(i.token)}),400);var t}}),r.a.createElement(_.a,{onClick:function(){return a(e.track)},className:"Track-icon"})))},R=function(e){return r.a.createElement("div",{className:"TrackList"},void 0!==e.tracks&&e.tracks.map((function(t){return r.a.createElement(I,{key:t.id,track:t,isRemoval:e.isRemoval})})))},J=function(e){var t=Object(n.useContext)(O).state;return r.a.createElement("div",{className:"SearchResults"},r.a.createElement("h2",null,"Search Results"),t.tracks&&r.a.createElement(R,{tracks:t.tracks}))},M=(a(95),function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useContext)(B).state,u=Object(n.useContext)(O),l=u.state,m=u.spotifySavePlaylist;return r.a.createElement("div",{className:"Playlist"},r.a.createElement("div",{className:"Playlist-header"},r.a.createElement("h2",null,"Create Playlist"),r.a.createElement("input",{placeholder:"New Name",onChange:function(e){o(e.target.value)}})),r.a.createElement(R,{tracks:i.tracks,isRemoval:!0}),r.a.createElement("div",{className:"Playlist-save",onClick:function(){var e=i.tracks.map((function(e){return e.uri}));m(c,e,l.userdata.id,l.token)}},"SAVE TO SPOTIFY"))}),D=a(54),F=a.n(D),H=(a(100),a(149)),L=a(153),W=a(154),G=a(155),U=a(156),q=function(e){var t=Object(i.c)(),a=Object(n.useContext)(O),c=a.state,o=a.getCurrentPlayback,u=Object(n.useContext)(B),l=u.state,m=u.resetAnimation,p=Object(n.useContext)(w),d=p.playSong,f=p.pauseSong,y=Object(n.useState)(e.data.is_playing),k=Object(s.a)(y,2),v=k[0],b=k[1],h=e.data.item.duration_ms,g=e.data.item.duration_ms-e.data.progress_ms,E=g/(h/100),j=g/1e3,x=-window.outerWidth/2.75;setTimeout((function(){o(c.token)}),5e3),console.log(l),l.resetAnimation&&(t.set({x:x,transition:{duration:j}}),m(!1));return v&&t.start({x:0,transition:{duration:j}}),r.a.createElement("div",{className:"PlayerContainer"},r.a.createElement(F.a,{initialTime:g,direction:"backward",checkpoints:[{time:0,callback:function(){return t.set({x:x,transition:{duration:j}}),void setTimeout((function(){e.getCurrentPlayback(c.token)}),400)}}]},(function(a){var n=a.start,o=a.pause;a.reset;return r.a.createElement(r.a.Fragment,null,e.data.item.name.length<30?r.a.createElement("h3",null,e.data.item.name):r.a.createElement("h5",null,e.data.item.name),r.a.createElement("img",{alt:"album",src:e.data.item.album.images[2].url,className:"playerContainerIMG"}),r.a.createElement(L.a,{className:"iconNext",onClick:function(){return e.forwardSong(),t.set({x:x,transition:{duration:j}}),void setTimeout((function(){e.getCurrentPlayback(c.token)}),400)}}),r.a.createElement("div",{className:"iconPosition"}," "),r.a.createElement(i.b.div,{style:{opacity:v?1:0,x:0}},r.a.createElement(W.a,{className:"playIcon"})),r.a.createElement(i.b.div,{animate:!0,style:{opacity:v?0:1,x:0}},r.a.createElement(G.a,{className:"playIcon",onClick:function(){return function(e,a,n){e?(a(),f(c.token),t.stop()):(n(),d(c.token),t.start({x:0,transition:{duration:j}})),b(!e)}(v,o,n)}})),r.a.createElement(U.a,{className:"iconPrevious",onClick:function(){return e.backwardSong(),t.set({x:x,transition:{duration:j}}),void setTimeout((function(){e.getCurrentPlayback(c.token)}),400)}}),r.a.createElement("div",{className:"playerProgressContainer"},r.a.createElement(i.b.div,{animate:t,initial:{x:"-".concat(E,"%")},className:"playerProgress"},r.a.createElement(H.a,{percent:100,strokeColor:{"0%":"#108ee9","100%":"#87d068"},showInfo:!1}))),r.a.createElement("div",{className:"playerTimer"}))})))},K=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useContext)(w),u=i.nextSong,l=i.previousSong,m=Object(n.useContext)(O),p=m.state,d=m.getCurrentPlayback;return Object(n.useEffect)((function(){d(p.token)}),[]),r.a.createElement("div",null,p.playerdata&&r.a.createElement(q,{data:p.playerdata,forwardSong:function(){o(!c),u(p.token),d(p.token)},backwardSong:function(){o(!c),l(p.token),d(p.token)},getCurrentPlayback:d}))},V=(a(145),function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useContext)(B).resetAnimation,u=Object(n.useContext)(O),l=u.state,m=u.playSpecificSong,p=u.getCurrentPlayback;return r.a.createElement("div",null,c?r.a.createElement("div",{key:e.data.album.id,className:"Track-Open"},r.a.createElement("div",{onClick:function(){return o(!c)},className:"Track-Open-Header"},r.a.createElement("img",{src:e.data.album.images[2].url,alt:"album cover",className:"Track-img-open"}),r.a.createElement("h4",null,e.data.album.name)),r.a.createElement("div",null,e.data.album.tracks.items.map((function(e){return r.a.createElement("div",{className:"Track-Open-Detail",key:e.id},r.a.createElement("div",{className:"Track-Open-Detail-Icon"},r.a.createElement(S.a,{className:"Track-icon",onClick:function(){return t=e.uri,m(l.token,t),i(!0),void setTimeout((function(){p(l.token)}),400);var t}})),e.name)})))):r.a.createElement("div",{onClick:function(){return o(!c)},key:e.data.album.id},r.a.createElement("div",{className:"Track",style:{cursor:"pointer"}},r.a.createElement("div",{className:"Track-cover-preview"},r.a.createElement("img",{className:"Track-album-cover",src:e.data.album.images[2].url,alt:"album cover"})),r.a.createElement("div",{className:"Track-information-container"},e.data.album.name.length<30?r.a.createElement("h3",{className:"Track-information"},e.data.album.name):r.a.createElement("p",{className:"Track-information"},e.data.album.name)))))}),Y=function(){var e=Object(n.useContext)(O),t=e.state,a=e.getAlbums;return Object(n.useEffect)((function(){a(t.token)}),[]),r.a.createElement("div",{className:"SearchResults"},r.a.createElement("h2",null,"Albums"),t.albums&&t.albums.items.map((function(e){return r.a.createElement(V,{data:e,key:e.album.id})})))},$=function(){var e=Object(n.useContext)(O),t=e.state,a=e.getToken,c=e.cleanErrorMessage,o=Object(n.useContext)(w).getCurrentPlayback,m=Object(n.useState)(!1),p=Object(s.a)(m,2),d=p[0],f=p[1];Object(n.useEffect)((function(){a(),y()}),[]);var y=function(){t.token&&o(t.token)};return r.a.createElement("div",null,t.token&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"TopContainer"},r.a.createElement("h1",null,"Ja",r.a.createElement("span",{className:"highlight"},"mm"),"ing"),t.userdata&&r.a.createElement("div",{className:"userBoardInfo"},r.a.createElement("div",{onClick:function(){return f(!d)}},d?r.a.createElement(u.a,{icon:l.b,className:"ShowPlayerListIcon"}):r.a.createElement(u.a,{icon:l.a,className:"ShowPlayerListIcon"})),r.a.createElement("h3",null,t.userdata.display_name),r.a.createElement("h5",null,t.userdata.product," |"," ",1!==t.userdata.followers.total?t.userdata.followers.total+" followers":t.userdata.followers.total+" follower"),r.a.createElement("a",{href:t.userdata.external_urls.spotify},r.a.createElement("img",{className:"userBoardIMG",src:t.userdata.images[0].url,alt:"profile_img"})))),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Header"},r.a.createElement(C,null),r.a.createElement(K,null)),r.a.createElement(i.a,null,t.error&&r.a.createElement(i.b.div,{className:"errorMessage",initial:{opacity:0},animate:{opacity:.5},transition:{duration:1},exit:{opacity:0}},r.a.createElement("p",{style:{opacity:0}},setTimeout(c,3e3)),r.a.createElement("p",null,t.error))),r.a.createElement("div",{className:"App-playlist"},r.a.createElement(J,null),d?r.a.createElement(Y,null):r.a.createElement(M,null)))))},Q=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null,r.a.createElement(j,null,r.a.createElement(z,null,r.a.createElement($,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e,t,a){e.exports=a(146)},66:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},95:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.c031f3e7.chunk.js.map